<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>RemoteVCC TEST SERVER</title>
        <style>
            #display {
                object-fit: contain;
                background: #000000;
                width: 100%;
                height: 80%;
            }
            #canvas {
                position: absolute;
                background-color:rgba(0,0,0,0);
                z-index: 10;
            }
            #fakeDisplay {
                position: absolute;
                z-index: -1;
            }
        </style>
    </head>
    <body onresize="resizeCanvas()">
        <input type="checkbox" id="realData"/><label>Screenshare</label>
        <input type="password" id="secret" placeholder="Connection Key"/>
        <button id="start">Start</button>
        <canvas id="fakeDisplay" width="30" height="20"></canvas>
        <label id="keys"></label>
        <br/>
        <video id="display" onplay="resizeCanvas()" autoplay></video>
        <canvas id="canvas"></canvas>
        <script src="testhost.js"></script>
        <script>
          // Snap canvases over video (for virtual pointer and fake display)
          const video = document.getElementById("display");
          const c = document.getElementById("canvas");
          const fc = document.getElementById("fakeDisplay");
          function resizeCanvas() {
            fc.style.left = c.style.left = video.offsetLeft + 'px';
            fc.style.top = c.style.top = video.offsetTop + 'px';
            fc.width = c.width = video.offsetWidth;
            fc.height = c.height = video.offsetHeight;
          }
          resizeCanvas()
          // Initiate the fake display animation
          const ctx = fc.getContext('2d');
          function drawVid() {
            const t = (new Date()).getTime()
            ctx.fillStyle = `rgb(${t/50%255},${t/33%255},${t/488%255})`;
            ctx.fillText("RemoteVCC", t/100%fc.clientWidth, t/9%fc.clientHeight)
          }
          setInterval(drawVid, 99);
        </script>
    </body>
</html>

